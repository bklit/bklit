---
title: Environment Variables
description: Complete guide to Bklit environment variables
---

# Environment Variables

This guide covers all environment variables required for Bklit Analytics.

## Required Variables

### Database

**`DATABASE_URL`**
- Your PostgreSQL database connection string
- Format: `postgresql://user:password@host:port/database`
- Required for: All apps

### Application URLs

**`AUTH_URL`**
- Your dashboard URL
- Local: `http://localhost:3000`
- Production: `https://app.bklit.com`
- Used for: Better Auth callbacks and session management

**`NEXT_PUBLIC_APP_URL`**
- Same as `AUTH_URL` (used by client-side code)
- Must match `AUTH_URL` value
- Used for: Client-side API calls and redirects

### Authentication

**`AUTH_SECRET`**
- Random secret for session encryption
- Generate with: `openssl rand -base64 32`
- Required for: All apps using authentication
- Documentation: [Better Auth](https://www.better-auth.com/docs/installation)

**`AUTH_GITHUB_ID`**
- GitHub OAuth App Client ID
- Create at: [GitHub OAuth Apps](https://github.com/settings/developers)
- Callback URL: `{AUTH_URL}/api/auth/callback/github`
- Required for: Dashboard, Website

**`AUTH_GITHUB_SECRET`**
- GitHub OAuth App Client Secret
- Get from: Your GitHub OAuth App settings
- Required for: Dashboard, Website

**`AUTH_GOOGLE_ID`** (Optional)
- Google OAuth Client ID
- Create at: [Google Cloud Console](https://console.cloud.google.com/apis/dashboard)
- Callback URL: `{AUTH_URL}/api/auth/callback/google`
- Documentation: [Better Auth Google Guide](https://www.better-auth.com/docs/authentication/google)

**`AUTH_GOOGLE_SECRET`** (Optional)
- Google OAuth Client Secret
- Get from: Google Cloud Console
- Required if: Using Google OAuth

### Polar (Billing)

**`POLAR_ACCESS_TOKEN`**
- Your Polar API access token
- Get from: [Polar Dashboard](https://polar.sh/dashboard)
- Required for: Billing and subscriptions

**`POLAR_SERVER_MODE`**
- Either `sandbox` or `production`
- Use `sandbox` for development/testing
- Use `production` for live billing

**`POLAR_WEBHOOK_SECRET`**
- Secret for verifying Polar webhooks
- Get from: Polar webhook settings
- Required for: Webhook processing

**`POLAR_ORGANIZATION_ID`**
- Your Polar organization ID
- Get from: Polar dashboard
- Required for: Organization context

**`POLAR_PRO_PRODUCT_ID`**
- Your Polar Pro product ID (server-side)
- Get from: Polar products page
- Required for: Pro plan subscriptions

**`NEXT_PUBLIC_POLAR_PRO_PLAN_PRODUCT_ID`**
- Your Polar Pro product ID (client-side)
- Same value as `POLAR_PRO_PRODUCT_ID`
- Required for: Pricing page display

**`POLAR_FREE_PRODUCT_ID`** (Optional)
- Your Polar Free product ID
- Only needed if you have a free plan in Polar
- Optional for: Free plan configuration

### Analytics

**`CLICKHOUSE_HOST`**
- ClickHouse database host URL
- Format: `http://host:port` or `https://host:port`
- Required for: Analytics data storage

**`CLICKHOUSE_USERNAME`**
- ClickHouse database username
- Required for: ClickHouse authentication

**`CLICKHOUSE_PASSWORD`**
- ClickHouse database password
- Required for: ClickHouse authentication

### Email

**`RESEND_API_KEY`**
- Your Resend API key
- Get from: [Resend Dashboard](https://resend.com/api-keys)
- Required for: Sending emails (welcome, invitations, etc.)
- Documentation: [Resend Docs](https://resend.com/docs/introduction)

### API Health Monitoring

**`ALERT_EMAIL`**
- Email address to receive health check alerts
- Required for: Health check email notifications
- Note: Also set in Trigger.dev dashboard for cloud execution

**`HEALTH_CHECK_SECRET`**
- Secret key for health check endpoint authentication
- Generate with: `openssl rand -base64 32`
- Send in: `Authorization: Bearer <secret>` or `X-Health-Check-Secret: <secret>` header
- Required for: Protecting health check endpoint

### Trigger.dev (Optional)

**`TRIGGER_SECRET_KEY`**
- Optional, for Trigger.dev cloud execution
- Get from: Trigger.dev dashboard
- Only needed if: Using Trigger.dev cloud

**`TRIGGER_API_KEY`**
- Optional, for Trigger.dev API access
- Get from: Trigger.dev dashboard
- Only needed if: Using Trigger.dev cloud

**`TRIGGER_API_URL`**
- Optional, for Trigger.dev API endpoint
- Default: Trigger.dev cloud URL
- Only needed if: Using Trigger.dev cloud

### Website App

**`NEXT_PUBLIC_BKLIT_WEBSITE_API_TOKEN`**
- API token for website tracking
- Get from: Dashboard â†’ API Tokens
- Required for: Website app tracking

**`NEXT_PUBLIC_BKLIT_API_HOST`** (Optional)
- Override API host URL
- Useful for: Development with cloudflared tunnel
- Leave blank: To use default production API host
- Example: `http://localhost:3000` or `https://abc123.trycloudflare.com`

### Dashboard App

**`NEXT_PUBLIC_MAPBOX_TOKEN`**
- Mapbox API token for live map component
- Get from: [Mapbox](https://account.mapbox.com/access-tokens/)
- Required for: Live visitor map feature

### Optional Variables

**`BKLIT_WEBSITE_URL`**
- Your marketing website URL
- Used for: Email template images
- Example: `https://bklit.com`

**`BKLIT_DEFAULT_PROJECT`**
- Auto-invite new users to this project's organization
- Format: Project ID (cuid)
- Optional: For auto-inviting new signups

**`NODE_ENV`**
- Node environment
- Values: `development`, `production`, `test`
- Usually set automatically

## Environment File Structure

Create a `.env` file in the root directory:

```bash
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/bklit"

# Application URLs
AUTH_URL="http://localhost:3000"
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Authentication
AUTH_SECRET="your-secret-here"
AUTH_GITHUB_ID="your-github-client-id"
AUTH_GITHUB_SECRET="your-github-client-secret"
AUTH_GOOGLE_ID="your-google-client-id"  # Optional
AUTH_GOOGLE_SECRET="your-google-client-secret"  # Optional

# Polar
POLAR_ACCESS_TOKEN="your-polar-token"
POLAR_SERVER_MODE="sandbox"
POLAR_WEBHOOK_SECRET="your-webhook-secret"
POLAR_ORGANIZATION_ID="your-org-id"
POLAR_PRO_PRODUCT_ID="your-pro-product-id"
NEXT_PUBLIC_POLAR_PRO_PLAN_PRODUCT_ID="your-pro-product-id"

# ClickHouse
CLICKHOUSE_HOST="http://localhost:8123"
CLICKHOUSE_USERNAME="default"
CLICKHOUSE_PASSWORD="your-password"

# Email
RESEND_API_KEY="your-resend-key"

# Health Monitoring
ALERT_EMAIL="alerts@example.com"
HEALTH_CHECK_SECRET="your-health-check-secret"

# Website
NEXT_PUBLIC_BKLIT_WEBSITE_API_TOKEN="your-token"

# Dashboard
NEXT_PUBLIC_MAPBOX_TOKEN="your-mapbox-token"
```

## Production Environment

For production, update these variables:

```bash
# Use production URLs
AUTH_URL="https://app.bklit.com"
NEXT_PUBLIC_APP_URL="https://app.bklit.com"

# Use production Polar mode
POLAR_SERVER_MODE="production"

# Use production database
DATABASE_URL="your-production-database-url"
```

## Security Best Practices

1. **Never commit `.env` files** - Add to `.gitignore`
2. **Use different secrets for each environment** - Don't reuse development secrets in production
3. **Rotate secrets regularly** - Especially `AUTH_SECRET` and `HEALTH_CHECK_SECRET`
4. **Use environment-specific values** - Different Polar products for sandbox vs production
5. **Limit access** - Only grant access to team members who need it

## Troubleshooting

### Missing Environment Variables

If you see errors about missing environment variables:

1. Check that your `.env` file exists in the root directory
2. Verify all required variables are set
3. Restart your development server after adding variables
4. Check that variable names match exactly (case-sensitive)

### Variable Not Loading

- Ensure `.env` file is in the root directory, not in app directories
- Restart the development server
- Check for typos in variable names
- Verify no extra spaces or quotes around values

## Related Documentation

- [Database Setup](/docs/getting-started/database-setup) - Database configuration
- [Development](/docs/getting-started/development) - Development workflow
- [Reference: Environment Variables](/docs/reference/environment-variables) - Complete reference

