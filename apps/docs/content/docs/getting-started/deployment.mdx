---
title: Deployment
description: Deploy Bklit Analytics to production
---

# Deployment

Guide for deploying Bklit Analytics to production.

## Prerequisites

- Production database (PostgreSQL)
- Production ClickHouse instance
- Domain names configured
- Environment variables set
- OAuth apps configured

## Environment Variables

Update all environment variables for production:

```bash
# Use production URLs
AUTH_URL="https://app.bklit.com"
NEXT_PUBLIC_APP_URL="https://app.bklit.com"

# Use production database
DATABASE_URL="postgresql://..."

# Use production Polar mode
POLAR_SERVER_MODE="production"

# Production credentials
AUTH_SECRET="..."
POLAR_ACCESS_TOKEN="..."
# ... all other variables
```

## Vercel Deployment

### Step 1: Push to GitHub

```bash
git push origin main
```

### Step 2: Import to Vercel

1. Go to [vercel.com](https://vercel.com)
2. Import GitHub repository
3. Configure project settings

### Step 3: Configure Build Settings

**Dashboard App:**
- Root Directory: `apps/dashboard`
- Build Command: `pnpm build`
- Output Directory: `.next`

**Website App:**
- Root Directory: `apps/website`
- Build Command: `pnpm build`
- Output Directory: `.next`

**Docs App:**
- Root Directory: `apps/docs`
- Build Command: `pnpm build`
- Output Directory: `.next`

### Step 4: Add Environment Variables

Add all required environment variables in Vercel:
- Go to Project Settings â†’ Environment Variables
- Add all variables from `.env`
- Set for Production environment

### Step 5: Deploy

1. Click "Deploy"
2. Wait for build to complete
3. Verify deployment
4. Test application

## Database Setup

### Production Database

1. Set up PostgreSQL instance
2. Run migrations: `pnpm db:migrate`
3. Verify schema
4. Set up backups

### ClickHouse Setup

1. Set up ClickHouse instance
2. Configure connection
3. Verify connectivity
4. Set up monitoring

## OAuth Configuration

### GitHub OAuth

1. Update callback URL:
   - `https://app.bklit.com/api/auth/callback/github`
2. Update OAuth app settings
3. Verify client ID/secret

### Google OAuth

1. Update callback URL:
   - `https://app.bklit.com/api/auth/callback/google`
2. Update OAuth credentials
3. Verify client ID/secret

## Domain Configuration

### Custom Domains

1. Add domains in Vercel:
   - Dashboard: `app.bklit.com`
   - Website: `bklit.com`
   - Docs: `docs.bklit.com`
2. Configure DNS records
3. Wait for SSL certificates

## Post-Deployment

### Verify Deployment

1. Test all applications
2. Verify authentication
3. Check API endpoints
4. Test analytics tracking

### Monitoring

1. Set up error monitoring
2. Configure alerts
3. Monitor performance
4. Track usage

## Cloudflare Setup

For geolocation features, set up Cloudflare:

See [Cloudflare Setup](/getting-started/cloudflare-setup) for detailed instructions.

## Related Documentation

- [Cloudflare Setup](/getting-started/cloudflare-setup) - Geolocation configuration
- [Environment Variables](/getting-started/environment-variables) - Configuration
- [Production Deployment](/getting-started/installation#production-deployment) - More details

